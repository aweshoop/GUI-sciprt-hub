local player = game.Players.LocalPlayer

-- ฟังก์ชันสร้าง GUI
local function createGUI()
    -- ลบ GUI เดิมถ้ามีอยู่
    if player.PlayerGui:FindFirstChild("CustomGUI") then
        player.PlayerGui:FindFirstChild("CustomGUI"):Destroy()
    end

    -- สร้าง GUI
    local screenGui = Instance.new("ScreenGui", player.PlayerGui)
    screenGui.Name = "CustomGUI"
    local frame = Instance.new("Frame", screenGui)
    local loadVoidButton = Instance.new("TextButton", frame)
    local loadTrashButton = Instance.new("TextButton", frame)
    local loadStarGlitcherButton = Instance.new("TextButton", frame)
    local loadSungJinWooButton = Instance.new("TextButton", frame)
    local loadYujiButton = Instance.new("TextButton", frame) -- ปุ่ม Yuji Script ใหม่
    local minimizeButton = Instance.new("TextButton", frame)
    local closeButton = Instance.new("TextButton", frame)

    -- ตั้งค่า Frame (สีแดง)
    frame.Size = UDim2.new(0, 250, 0, 340) -- ขยายขนาดเพื่อรองรับปุ่มใหม่
    frame.Position = UDim2.new(0.5, -125, 0.35, 0)
    frame.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
    frame.Active = true
    frame.Draggable = true

    -- ตั้งค่าปุ่มโหลดต่างๆ
    local buttons = {
        {loadVoidButton, "Load Void Garou", "https://raw.githubusercontent.com/yes1nt/yes/refs/heads/main/Void%20Reaper%20Obfuscated.txt"},
        {loadTrashButton, "Load Trash Can Man", "https://raw.githubusercontent.com/yes1nt/yes/refs/heads/main/Trashcan%20Man"},
        {loadStarGlitcherButton, "Star Glitcher", "https://raw.githubusercontent.com/Reapvitalized/TSB/refs/heads/main/SG_DEMO.lua"},
        {loadSungJinWooButton, "Sung Jin Woo", "https://raw.githubusercontent.com/hamletirl/sunjingwoo/refs/heads/main/sunjingwoo"},
        {loadYujiButton, "Yuji Script", "https://raw.githubusercontent.com/Kenjihin69/Kenjihin69/refs/heads/main/Sigma%20v2%20vessel%20tp"} -- Yuji Script
    }

    for i, data in ipairs(buttons) do
        local button, text, url = unpack(data)
        button.Size = UDim2.new(0, 200, 0, 40)
        button.Position = UDim2.new(0.5, -100, 0.15 * i, 0)
        button.Text = text
        button.BackgroundColor3 = Color3.fromRGB(140, 0, 0)
        button.TextColor3 = Color3.fromRGB(255, 255, 255)
        button.Parent = frame
        button.MouseButton1Click:Connect(function()
            print("Loading " .. text .. "...")
            if text == "Yuji Script" then
                -- โหลด Yuji Script พร้อมตัวแปร getgenv()
                getgenv().secret = false
                getgenv().Dance = true
                getgenv().fog = true
                getgenv().infinitedash = false
                getgenv().night = false
            end
            loadstring(game:HttpGet(url))()
        end)
    end

    -- ตั้งค่าปุ่มย่อขนาด
    minimizeButton.Size = UDim2.new(0, 50, 0, 30)
    minimizeButton.Position = UDim2.new(1, -60, 0, 5)
    minimizeButton.Text = "-"
    minimizeButton.BackgroundColor3 = Color3.fromRGB(120, 0, 0)
    minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    minimizeButton.Parent = frame

    -- ตั้งค่าปุ่มปิด
    closeButton.Size = UDim2.new(0, 50, 0, 30)
    closeButton.Position = UDim2.new(1, -110, 0, 5)
    closeButton.Text = "X"
    closeButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
    closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeButton.Parent = frame

    -- ฟังก์ชันย่อขนาด
    local isMinimized = false
    minimizeButton.MouseButton1Click:Connect(function()
        isMinimized = not isMinimized
        frame.Size = isMinimized and UDim2.new(0, 250, 0, 40) or UDim2.new(0, 250, 0, 340)
        for _, data in ipairs(buttons) do
            data[1].Visible = not isMinimized
        end
    end)

    -- ฟังก์ชันปิด GUI
    closeButton.MouseButton1Click:Connect(function()
        screenGui:Destroy()
        spawnSmallButton()
    end)
end

-- ฟังก์ชันสร้างปุ่มวงกลมเล็ก
function spawnSmallButton()
    if player.PlayerGui:FindFirstChild("SmallButtonGUI") then
        player.PlayerGui:FindFirstChild("SmallButtonGUI"):Destroy()
    end

    local smallGui = Instance.new("ScreenGui", player.PlayerGui)
    smallGui.Name = "SmallButtonGUI"
    local button = Instance.new("TextButton", smallGui)

    -- ตั้งค่าปุ่มวงกลมเล็ก
    button.Size = UDim2.new(0, 50, 0, 50)
    button.Position = UDim2.new(0, 10, 0, 10)
    button.Text = "GUI"
    button.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Font = Enum.Font.SourceSansBold
    button.TextSize = 30
    button.Parent = smallGui

    -- ฟังก์ชันการกดปุ่มเพื่อเปิด GUI อีกครั้ง
    button.MouseButton1Click:Connect(function()
        createGUI()
        smallGui:Destroy()
    end)
end

-- เรียกใช้ฟังก์ชันสร้าง GUI
createGUI()

-- ตรวจจับการเกิดใหม่ และสร้าง GUI ใหม่
player.CharacterAdded:Connect(function()
    wait(1)
    createGUI()
end)
